{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\easy-shop\\\\Screens\\\\Products\\\\ProductContainer.js\";\n\nimport React, { useState, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Container, Header, Icon, Item, Input, Text } from \"native-base\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport axios from 'axios';\nimport ProductList from \"./ProductList\";\nimport SearchedProduct from \"./SearchedProducts\";\nimport Banner from \"../../Shared/Banner\";\nimport CategoryFilter from \"./CategoryFilter\";\nimport baseURL from \"../../assets/common/baseUrl\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    height = _Dimensions$get.height;\n\nvar ProductContainer = function ProductContainer(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      productsFiltered = _useState4[0],\n      setProductsFiltered = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      focus = _useState6[0],\n      setFocus = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      categories = _useState8[0],\n      setCategories = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      productsCtg = _useState10[0],\n      setProductsCtg = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      productsS = _useState12[0],\n      setProductsS = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      active = _useState14[0],\n      setActive = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      initialState = _useState16[0],\n      setInitialState = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      loading = _useState18[0],\n      setLoading = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      loadMore = _useState20[0],\n      setLoadMore = _useState20[1];\n\n  var _useState21 = useState(0),\n      _useState22 = _slicedToArray(_useState21, 2),\n      page = _useState22[0],\n      setPage = _useState22[1];\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      totalPage = _useState24[0],\n      setTotalPage = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isLoading = _useState26[0],\n      setIsLoading = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      SearchedText = _useState28[0],\n      setSearchedText = _useState28[1];\n\n  var _useState29 = useState(false),\n      _useState30 = _slicedToArray(_useState29, 2),\n      Ordered = _useState30[0],\n      setOrdered = _useState30[1];\n\n  var _searchTextInputChanged = function _searchTextInputChanged(text) {\n    setSearchedText(text);\n  };\n\n  var _loadProducts = function _loadProducts() {\n    setIsLoading(true), getProductsFromApiWithSearchedText(SearchedText).then(function (data) {\n      console.log(data), setProductsS(data), setIsLoading(false), setSearchedText(\"\");\n    });\n  };\n\n  var getProductsFromApiWithSearchedText = function getProductsFromApiWithSearchedText(text) {\n    var url = 'https://ecosmart-atos.herokuapp.com/products?keyword=' + text;\n    return fetch(url).then(function (res) {\n      return res.json();\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n\n  var ComponentWillMount = function ComponentWillMount() {\n    useFocusEffect(useCallback(function () {\n      setFocus(false);\n      setActive(-1);\n      axios.get('https://ecosmart-atos.herokuapp.com/products').then(function (res) {\n        setProducts(res.data);\n        setProductsFiltered(res.data);\n        setProductsCtg(res.data);\n        setInitialState(res.data);\n        setLoading(false);\n        setIsLoading(false);\n        _this.props.page = res.data.currentPage;\n        _this.props.totalPages = res.data.totalPages;\n        props.SearchedText = \"hey\";\n      }).catch(function (error) {\n        console.log('no');\n      });\n      axios.get('https://ecosmart-atos.herokuapp.com/category/all').then(function (res) {\n        setCategories(res.data), console.log(_this.props.SearchedText);\n      }).catch(function (error) {\n        console.log('Api call error');\n      });\n      return function () {\n        setProducts([]);\n        setProductsFiltered([]);\n        setFocus();\n        setCategories([]);\n        setActive();\n        setInitialState();\n      };\n    }, []));\n  };\n\n  var searchProduct = function searchProduct(text) {\n    setProductsFiltered(products.filter(function (i) {\n      return i.libelle_product.toLowerCase().includes(text.toLowerCase());\n    }));\n  };\n\n  var openList = function openList() {\n    setFocus(true);\n  };\n\n  var onBlur = function onBlur() {\n    setFocus(false);\n  };\n\n  var changeCtg = function changeCtg(ctg) {\n    {\n      ctg === \"all\" ? [setProductsCtg(initialState), setActive(true)] : [setProductsCtg(products.filter(function (i) {\n        return i.category.category_id === ctg;\n      }), setActive(true))];\n    }\n  };\n\n  return ComponentWillMount(), React.createElement(React.Fragment, null, loading == false ? React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 2\n    }\n  }, React.createElement(Header, {\n    searchBar: true,\n    rounded: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 2\n    }\n  }, React.createElement(Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 4\n    }\n  }, React.createElement(Icon, {\n    name: \"ios-search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 6\n    }\n  }), React.createElement(Input, {\n    clearButtonMode: \"always\",\n    placeholder: \"Search\",\n    onFocus: openList,\n    onChangeText: function onChangeText(text) {\n      return _searchTextInputChanged(text);\n    },\n    onSubmitEditing: function onSubmitEditing() {\n      _loadProducts(), setOrdered(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 6\n    }\n  }), focus == true ? React.createElement(Icon, {\n    onPress: onBlur,\n    name: \"ios-close\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 23\n    }\n  }) : null)), focus == true ? React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 4\n    }\n  }, Ordered == true ? React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, \" Prioritize Chosing the first item of the list since it is the less harmful for the enviorment\") : React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 135\n    }\n  }, \"    Make your search and get an ordered list from        the item with the lowest carbon emission to the     highest \"), React.createElement(FlatList, {\n    data: productsS,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(ProductList, {\n        navigation: props.navigation,\n        key: item.name,\n        item: item,\n        keyExtractor: item.product_id,\n        onEndReachedThreshold: 0.5,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 5\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 4\n    }\n  })) : React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 6\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 8\n    }\n  }), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 8\n    }\n  }, React.createElement(CategoryFilter, {\n    categories: categories,\n    categoryFilter: changeCtg,\n    productsCtg: productsCtg,\n    active: active,\n    setActive: setActive,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 10\n    }\n  })), productsCtg.length > 0 ? React.createElement(FlatList, {\n    data: productsCtg,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(ProductList, {\n        navigation: props.navigation,\n        key: item.name,\n        item: item,\n        keyExtractor: item.product_id,\n        onEndReachedThreshold: 0.5,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 8\n    }\n  }) : React.createElement(View, {\n    style: [styles.center, {\n      height: height / 2\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 12\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 16\n    }\n  }, \"No products found\")))) : React.createElement(Container, {\n    style: [styles.center, {\n      backgroundColor: \"#f2f2f2\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"red\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\"\n  },\n  listContainer: {\n    height: height,\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\"\n  },\n  center: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default ProductContainer;","map":{"version":3,"sources":["C:/Users/admin/Desktop/easy-shop/Screens/Products/ProductContainer.js"],"names":["React","useState","useCallback","Container","Header","Icon","Item","Input","Text","useFocusEffect","axios","ProductList","SearchedProduct","Banner","CategoryFilter","baseURL","Dimensions","get","height","ProductContainer","props","products","setProducts","productsFiltered","setProductsFiltered","focus","setFocus","categories","setCategories","productsCtg","setProductsCtg","productsS","setProductsS","active","setActive","initialState","setInitialState","loading","setLoading","loadMore","setLoadMore","page","setPage","totalPage","setTotalPage","isLoading","setIsLoading","SearchedText","setSearchedText","Ordered","setOrdered","_searchTextInputChanged","text","_loadProducts","getProductsFromApiWithSearchedText","then","data","console","log","url","fetch","res","json","catch","error","ComponentWillMount","currentPage","totalPages","searchProduct","filter","i","libelle_product","toLowerCase","includes","openList","onBlur","changeCtg","ctg","category","category_id","item","navigation","name","product_id","length","styles","center","backgroundColor","StyleSheet","create","container","flexWrap","listContainer","flex","flexDirection","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\n\nimport {\n  View,\n  StyleSheet,\n  ActivityIndicator,\n  FlatList,\n  ScrollView,\n  Dimensions,\n \n} from \"react-native\";\nimport { Container, Header, Icon, Item, Input, Text } from \"native-base\";\nimport { useFocusEffect } from '@react-navigation/native'\nimport axios from 'axios';\nimport ProductList from \"./ProductList\";\nimport SearchedProduct from \"./SearchedProducts\";\nimport Banner from \"../../Shared/Banner\";\nimport CategoryFilter from \"./CategoryFilter\";\nimport baseURL from \"../../assets/common/baseUrl\";\n\nvar { height } = Dimensions.get('window')\n\nconst ProductContainer = (props) => {\n\n  const [products, setProducts] = useState([]);\n  const [productsFiltered, setProductsFiltered] = useState([]);\n  const [focus, setFocus] = useState();\n  const [categories, setCategories] = useState([]);\n  const [productsCtg, setProductsCtg] = useState([]);\n  const [productsS, setProductsS] = useState([]);\n  const [active, setActive] = useState();\n  const [initialState, setInitialState] = useState([]);\n  const [loading, setLoading] = useState(true);\n//  const[scrollY, setScrollY] = useState(new Animated.Value(0));\n  const [loadMore, setLoadMore] = useState(false);\n  const [page, setPage] = useState(0);\n  const [totalPage, setTotalPage] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [SearchedText, setSearchedText] = useState(\"\");\n  const [Ordered, setOrdered] = useState(false)\n  //this.scrollY = new Animated.value(0);\n\n\n\n\nconst _searchTextInputChanged = (text) => {\n  setSearchedText(text)\n}\n\n/*const _searchProducts = () =>{\n   // this.page = 0\n   // this.totalPages = 0\n\n     _loadProducts()\n      \n}*/\n\n\n\nconst _loadProducts = () =>{\n  //if ( SearchedText.length > 0) {\n    setIsLoading( true ),\n    //setTextInput(\"\"),\n    getProductsFromApiWithSearchedText(SearchedText)\n    .then(data => {\n       // this.page = data.page\n       // this.totalPages = data.total_pages\n       console.log(data),\n        setProductsS(data),\n        setIsLoading(false),\n        setSearchedText(\"\")\n        //console.log(productsCtg);\n    })\n  //}\n}\nconst getProductsFromApiWithSearchedText = (text) =>{\n  const url = 'https://ecosmart-atos.herokuapp.com/products?keyword=' + text\n      return fetch(url)        //recommanded to use for url search requests\n // .then((response) => response.json())   //make the response a json file\n  .then((res) =>  res.json() )\n  .catch((error) => console.log(error))\n}\n\nconst ComponentWillMount = () =>{ useFocusEffect((\n    \n    useCallback(\n      () => {\n        setFocus(false);\n        setActive(-1);\n        \n        // Products\n      axios\n          .get('https://ecosmart-atos.herokuapp.com/products')\n         // .then((response) => response.json())\n          .then((res) => {\n            setProducts(res.data);\n            setProductsFiltered(res.data);\n            setProductsCtg(res.data);\n            setInitialState(res.data);\n            setLoading(false);\n            setIsLoading(false);\n            //added\n            this.props.page = res.data.currentPage;\n            this.props.totalPages = res.data.totalPages;\n            props.SearchedText =\"hey\";\n          })\n          .catch((error) => {\n            console.log('no')\n          })\n    \n        // Categories\n      axios\n          .get('https://ecosmart-atos.herokuapp.com/category/all')\n          .then((res) => {\n            setCategories(res.data),\n            console.log(this.props.SearchedText)\n          })\n          .catch((error) => {\n            console.log('Api call error')\n          })\n    \n        return () => {\n          setProducts([]);\n          setProductsFiltered([]);\n          setFocus();\n          setCategories([]);\n          setActive();\n          setInitialState();\n        };\n      },\n      [],\n    )\n  ))\n    }\n  \n    \n\n  // Product Methods\n  const searchProduct = (text) => {\n    setProductsFiltered(\n      products.filter((i) => i.libelle_product.toLowerCase().includes(text.toLowerCase()))\n    );\n  };\n\n  const openList = () => {\n    setFocus(true);\n  };\n\n  const onBlur = () => {\n    setFocus(false);\n  };\n\n\n\n\n\n  // Categories\n  const changeCtg = (ctg) => {\n    {\n      ctg === \"all\"\n        ? [setProductsCtg(initialState), setActive(true)]\n        : [\n            setProductsCtg(\n              products.filter((i) => i.category.category_id === ctg),\n              setActive(true)\n            ),\n          ];\n    }\n  };\n\n  return (\n    ComponentWillMount(),\n    <>\n    {loading == false ? (\n <Container>\n <Header searchBar rounded>\n   <Item>\n     <Icon name=\"ios-search\" />\n     <Input\n     clearButtonMode=\"always\"\n       placeholder=\"Search\"\n       onFocus={openList}\n        onChangeText={(text) => _searchTextInputChanged(text)}\n        onSubmitEditing={() => {_loadProducts(), setOrdered(true)}}\n     // onChangeText={(text) => searchProduct(text)}\n     />\n  \n     {focus == true ? <Icon onPress={onBlur} name=\"ios-close\" /> : null}\n   </Item>\n </Header>\n {focus == true ? (\n /*  <SearchedProduct \n   navigation={props.navigation}\n   productsFiltered={productsFiltered} \n  \n   />*/       \n   <View>\n     {Ordered == true ? <Text> Prioritize Chosing the first item of the list since it is the less harmful for the enviorment</Text> : <Text>    Make your search and get an ordered list from        the item with the lowest carbon emission to the     highest </Text> }\n    \n   <FlatList\n   data ={productsS}\n   renderItem = {({item}) => (\n    <ProductList\n    navigation={props.navigation}\n    key={item.name}\n    item={item}\n    keyExtractor={item.product_id}\n    onEndReachedThreshold={0.5}\n   \n   /* onEndReached={() => {\n      if (this.props.page < this.props.totalPages) { // On vérifie qu'on n'a pas atteint la fin de la pagination (totalPages) avant de charger plus d'éléments\n         loadData()\n      }\n  }}*/\n  \n/>\n   )}\n > \n \n </FlatList>\n </View>\n ) : (\n \n     <View>\n       <View>\n       \n       </View>\n       <View>\n         <CategoryFilter\n           categories={categories}\n           categoryFilter={changeCtg}\n           productsCtg={productsCtg}\n           active={active}\n           setActive={setActive}\n         />\n       </View>\n       {productsCtg.length > 0 ?\n       \n       <FlatList\n         data ={productsCtg}\n         renderItem = {({item}) => (\n          <ProductList\n          navigation={props.navigation}\n          key={item.name}\n          item={item}\n          keyExtractor={item.product_id}\n          onEndReachedThreshold={0.5}\n         /* onEndReached={() => {\n            if (this.props.page < this.props.totalPages) { // On vérifie qu'on n'a pas atteint la fin de la pagination (totalPages) avant de charger plus d'éléments\n               loadData()\n            }\n        }}*/       \n      />\n         )}\n       > \n       </FlatList>\n       /* (\n         <View style={styles.listContainer}>\n           {productsCtg.map((item) => {\n               return(\n                   <ProductList\n                       navigation={props.navigation}\n                       key={item.name}\n                       item={item}\n                   />\n               )\n           })}\n       </View>\n       )*/ : (\n           <View style={[styles.center, { height: height / 2}]}>\n               <Text>No products found</Text>\n           </View>\n       )}\n      \n     </View>\n   \n )}\n</Container>\n    ) : (\n      // Loading\n      <Container style={[styles.center, { backgroundColor: \"#f2f2f2\" }]}>\n        <ActivityIndicator size=\"large\" color=\"red\" />\n      </Container>\n    )}\n   </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n  },\n  listContainer: {\n    height: height,\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\",\n    backgroundColor: \"gainsboro\",\n   // marginBottom: 2000\n  },\n  center: {\n      justifyContent: 'center',\n      alignItems: 'center'\n  }\n});\n\nexport default ProductContainer;\n"]},"metadata":{},"sourceType":"module"}