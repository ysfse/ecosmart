{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\easy-shop\\\\Screens\\\\User\\\\UserProfile.js\";\n\nimport React, { useContext, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Container } from \"native-base\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport OrderCard from \"../../Shared/OrderCard\";\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\nimport { useEffect } from 'react/cjs/react.development';\n\nvar UserProfile = function UserProfile(props) {\n  var context = useContext(AuthGlobal);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      userProfile = _useState2[0],\n      setUserProfile = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orders = _useState4[0],\n      setOrders = _useState4[1];\n\n  useFocusEffect(useCallback(function () {\n    if (context.stateUser.isAuthenticated === false || context.stateUser.isAuthenticated === null) {\n      props.navigation.navigate(\"Login\");\n    }\n\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      console.log(res), axios.get('https://ecosmart-atos.herokuapp.com/currentUser', {\n        headers: {\n          Authorization: \"Bearer \" + res\n        }\n      }).then(function (user) {\n        setUserProfile(user.data), console.log(user);\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    return function () {\n      setUserProfile();\n      setOrders();\n    };\n  }, [context.stateUser.isAuthenticated]));\n  return React.createElement(Container, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 8\n    }\n  }, React.createElement(ScrollView, {\n    contentContainerStyle: styles.subContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 30\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }\n  }, userProfile ? userProfile.firstName + \" \" + userProfile.lastName : \"\"), React.createElement(View, {\n    style: {\n      marginTop: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 16\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, \"Email: \", userProfile ? userProfile.email : \"\"), React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, \"Username: \", userProfile ? userProfile.username : \"\")), React.createElement(View, {\n    style: {\n      marginTop: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }\n  }, React.createElement(Button, {\n    title: \"Sign Out\",\n    onPress: function onPress() {\n      return [AsyncStorage.removeItem(\"jwt\"), logoutUser(context.dispatch)];\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.order,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 20\n    }\n  }, \"My Orders\"), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 20\n    }\n  }, orders ? orders.map(function (x) {\n    return React.createElement(OrderCard, _extends({\n      key: x.id\n    }, x, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 39\n      }\n    }));\n  }) : React.createElement(View, {\n    style: styles.order,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 28\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 32\n    }\n  }, \"You have no orders\"))))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  subContainer: {\n    alignItems: \"center\",\n    marginTop: 60\n  },\n  order: {\n    marginTop: 20,\n    alignItems: \"center\",\n    marginBottom: 60\n  }\n});\nexport default UserProfile;","map":{"version":3,"sources":["C:/Users/admin/Desktop/easy-shop/Screens/User/UserProfile.js"],"names":["React","useContext","useState","useCallback","Container","useFocusEffect","AsyncStorage","OrderCard","axios","baseURL","AuthGlobal","logoutUser","useEffect","UserProfile","props","context","userProfile","setUserProfile","orders","setOrders","stateUser","isAuthenticated","navigation","navigate","getItem","then","res","console","log","get","headers","Authorization","user","data","catch","error","styles","container","subContainer","fontSize","firstName","lastName","marginTop","margin","email","username","removeItem","dispatch","order","map","x","id","StyleSheet","create","flex","alignItems","marginBottom"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useCallback } from 'react';\nimport { View, Text, ScrollView, Button, StyleSheet } from 'react-native';\nimport { Container } from \"native-base\"\nimport { useFocusEffect } from \"@react-navigation/native\"\nimport AsyncStorage from \"@react-native-community/async-storage\"\nimport OrderCard from \"../../Shared/OrderCard\"\n\nimport axios from \"axios\"\nimport baseURL from \"../../assets/common/baseUrl\"\n\nimport AuthGlobal from \"../../Context/store/AuthGlobal\"\nimport { logoutUser } from \"../../Context/actions/Auth.actions\"\nimport { useEffect } from 'react/cjs/react.development';\n\nconst UserProfile = (props) => {\n    const context = useContext(AuthGlobal)\n    const [userProfile, setUserProfile] = useState()\n    const [orders, setOrders] = useState()\n\n    useFocusEffect(\n        useCallback(() => {\n        if (\n            context.stateUser.isAuthenticated === false || \n            context.stateUser.isAuthenticated === null\n        ) {\n            props.navigation.navigate(\"Login\")\n        }\n\n        AsyncStorage.getItem(\"jwt\")\n            .then((res) => {\n                console.log(res),\n                axios\n                    .get( 'https://ecosmart-atos.herokuapp.com/currentUser', {\n                        headers: { Authorization: `Bearer ${res}` },\n                        \n                    })\n                    .then((user) => {setUserProfile(user.data),\n                       console.log(user)\n                    })\n            })\n            .catch((error) => console.log(error)\n            )\n\n      /*  axios\n        .get( 'http://0e9c9a161880.ngrok.io/api/v1/orders')\n        .then((x) => {\n            const data = x.data;\n            console.log(data)\n            const userOrders = data.filter(\n                (order) => order.user._id === context.stateUser.user.sub\n            );\n            setOrders(userOrders);\n        })\n        .catch((error) => console.log(error))*/\n\n        return () => {\n            setUserProfile();\n            setOrders();\n        }\n\n    }, [context.stateUser.isAuthenticated]))\n\n    return (\n       <Container style={styles.container}>\n           <ScrollView contentContainerStyle={styles.subContainer}>\n               <Text style={{ fontSize: 30 }}>\n                   {userProfile ? userProfile.firstName + \" \"+ userProfile.lastName : \"\" }\n               </Text>\n               <View style={{ marginTop: 20 }}>\n                    <Text style={{ margin: 10 }}>\n                        Email: {userProfile ? userProfile.email : \"\"}\n                    </Text>\n                    <Text style={{ margin: 10 }}>\n                        Username: {userProfile ? userProfile.username : \"\"}\n                    </Text>\n               </View>\n               <View style={{ marginTop: 80 }}>\n                    <Button title={\"Sign Out\"} onPress={() => [\n                        AsyncStorage.removeItem(\"jwt\"),\n                        logoutUser(context.dispatch)\n                    ]}/>\n               </View>\n              <View style={styles.order}>\n                   <Text style={{ fontSize: 20 }}>My Orders</Text>\n                   <View>\n                       {orders ? (\n                           orders.map((x) => {\n                               return <OrderCard key={x.id} {...x} />;\n                           })\n                       ) : (\n                           <View style={styles.order}>\n                               <Text>You have no orders</Text>\n                           </View>\n                       )}\n                   </View>\n               </View>\n           </ScrollView>\n       </Container>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        alignItems: \"center\"\n    },\n    subContainer: {\n        alignItems: \"center\",\n        marginTop: 60\n    },\n    order: {\n        marginTop: 20,\n        alignItems: \"center\",\n        marginBottom: 60\n    }\n})\n\nexport default UserProfile;"]},"metadata":{},"sourceType":"module"}